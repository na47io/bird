<div class="container">
  <p style="color: green"><%= notice %></p>

  <% content_for :title, @query.present? ? "Search Results" : "Posts" %>

  <div class="header-section">
  <h1><%= @query.present? ? "Search Results" : "Posts" %></h1>
  
  <div class="search-section">
    <%= form_tag posts_path, method: :get, class: "search-form" do %>
      <%= search_field_tag :q, params[:q], placeholder: "Search posts and replies...", class: "search-input" %>
      <%= submit_tag "Search", class: "search-button" %>
    <% end %>
  </div>
</div>

<% if @query.present? %>
  <p class="search-info">Showing results for "<%= @query %>"</p>
<% end %>
<button class="new-post-button" onclick="document.getElementById('new-post-dialog').showModal()">New Post</button>

<div id="posts">
  <%= render partial: "posts/post", collection: @posts %>
</div>

<dialog id="new-post-dialog" class="post-dialog">
  <%= form_for Post.new, html: { class: "post-form" }, data: { turbo: true } do |f| %>
    <div class="dialog-header">
      <button type="button" class="cancel-button" onclick="this.closest('dialog').close()">Cancel</button>
      <%= f.submit "Post", class: "post-submit-button" %>
    </div>
    
    <div class="dialog-content">
      <div class="profile-image"></div>
      <div class="input-area">
        <%= f.text_field :author, placeholder: "Your name", class: "author-input" %>
        <%= f.text_area :body, placeholder: "What's up?", class: "body-input" %>
      </div>
    </div>
    
    <div class="dialog-footer">
      <div class="visibility-info">
        <span class="globe-icon">🌐</span>
        <span>Anybody can interact</span>
      </div>
      
      <div class="dialog-tools">
        <div class="media-tools">
          <button type="button" class="tool-button">🖼️</button>
          <button type="button" class="tool-button">🎥</button>
          <button type="button" class="tool-button">GIF</button>
          <button type="button" class="tool-button">😊</button>
        </div>
        <div class="post-meta-tools">
          <select class="language-select">
            <option>English</option>
          </select>
          <span class="character-count">300</span>
        </div>
      </div>
    </div>
  <% end %>
</dialog>
</div>
