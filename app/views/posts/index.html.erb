<div class="main-content">
  <div class="container">
  <p style="color: green"><%= notice %></p>

  <% content_for :title, @query.present? ? "Search Results" : "Posts" %>

  <div class="header-section">
  <h1><%= @query.present? ? "Search Results" : "Posts" %></h1>
  
  <div class="search-section">
    <%= form_tag posts_path, method: :get, class: "search-form" do %>
      <%= search_field_tag :q, params[:q], placeholder: "Search posts and replies...", class: "search-input" %>
    <% end %>
  </div>
  </div>
</div>

<footer class="footer">
  <a href="https://github.com/yourusername/yourrepo" target="_blank">
    View source code on GitHub 
    <svg height="16" width="16" style="display: inline-block; vertical-align: text-bottom;" viewBox="0 0 16 16" version="1.1">
      <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
    </svg>
  </a>
</footer>

<% if @query.present? %>
  <p class="search-info">Showing results for "<%= @query %>"</p>
<% end %>
<% if authenticated? %>
  <button class="btn btn-primary btn-lg new-post-button" onclick="document.getElementById('new-post-dialog').showModal()">New Post</button>
<% end %>

<div id="posts">
  <%= render partial: "posts/post", collection: @posts %>
</div>

<div id="load-more">
  <%= render "load_more", page: @page, per_page: @per_page, total_count: @total_count %>
</div>

<dialog id="new-post-dialog" class="post-dialog" onclick="if (event.target === this) this.close()">
  <%= form_for Post.new, html: { class: "post-form" }, data: { turbo: true } do |f| %>
    <%= render 'shared/post_dialog', form: f %>
  <% end %>
</dialog>
</div>
